\documentclass[a4paper,11pt]{book} %ADD diffusion OR archiv for final versions
% \usepackage[latin9]{inputenc}
\usepackage[T1]{fontenc}    % Output encoding: allows proper hyphenation and accents
\usepackage[utf8]{inputenc} % Input encoding: allows typing é, è, ñ, etc.
\usepackage{lmodern}        % Scalable fonts with full T1 support
\usepackage{xspace}			  
\usepackage[english]{babel}
\usepackage[margin=28mm,includeheadfoot]{geometry}
% width fig 149mm!!!
\usepackage{thcover}
\usepackage{physics}
\usepackage{setspace}
\usepackage{amssymb}
\usepackage{float}
\usepackage{caption} % Load caption before minitoc
\usepackage{setspace}
\usepackage{mathtools}
\usepackage{tikz}
\usepackage{gensymb}
% \usepackage[backend=biber,style=numeric,sorting=none,backref=true,url=false,doi=false,isbn=false,eprint=false]{biblatex}
\usepackage[backend=biber,style=numeric-comp,sorting=none, date=year, backref=false, url=false,doi=false,isbn=false,eprint=false,giveninits=true,sorting=none,sortcites=true]{biblatex}
\addbibresource{./bib/bib_these.bib}
\addbibresource{./bib/references.bib}
\addbibresource{./bib/references_these.bib}

\AtEveryBibitem{\clearlist{publisher}\clearname{publisher}}
\AtEveryBibitem{\clearfield{month}\clearfield{day}}
% if your .bib uses 'date' (YYYY-MM-DD), this ensures only the year prints:
\AtEveryBibitem{\clearfield{urlyear}\clearfield{urlmonth}\clearfield{urlday}} 


% \addbibresource{./bib/library_these.bib}
% \addbibresource{./bib/optomechanics.bib}
% \addbibresource{./bib/quantum.bib}


\singlespacing % or \singlespacing or \doublespacing
\input{./preamb/preamb-graph.tex}
\input{./preamb/preamb-math.tex}
\input{./preamb/preamb-util.tex}
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=magenta,  
    citecolor=blue,
    urlcolor=blue,
    pdftitle={My Thesis Title},
    pdfauthor={Author Name},
    pdfsubject={Thesis Subject},
    pdfkeywords={keyword1, keyword2, keyword3},
}
\usepackage{minitoc}
\renewcommand{\thechapter}{\Roman{chapter}}
\renewcommand{\thefigure}{\thechapter.\arabic{figure}} % Figure numbering: Chapter.Figure
\renewcommand{\thetable}{\thechapter.\arabic{table}}   % Table numbering: Chapter.Table
\dominitoc
\raggedbottom
\begin{document}
% Ensure consistent and flat minitoc spacing (uses titletoc

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% PAGES LIMINAIRES %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\frontmatter
\frontcover
\input{thcoverdata.tex} % Ensure this file is correctly filled
\pagenumbering{gobble} % no page numbers at all in front matter

\input{thcoverdata.tex}
\input{./thanks.tex}

\begingroup
% ... your toc formatting
\tableofcontents
\endgroup

% -----------------------
% Start numbering at Chap 1
% -----------------------
\cleardoublepage
\pagenumbering{arabic}
\setcounter{page}{1}

\mainmatter
\input{./chap1/chap1.tex}
\input{./chap2/chap2.tex}
\input{./chap3/chap3.tex}
\input{./chap4/chap4.tex}
\input{./chap5/chap5.tex}
\input{./chap6/chap6.tex}
\input{./chap7/chap7.tex}
\input{appA}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% FINAL PAGES %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\backmatter\ 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%  BIBLIOGRAPHY %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\cleardoublepage\ 
\phantomsection\ 
% \addcontentsline{toc}{chapter}{Bibliography}
%%%%% use of BiBTeX:
\printbibliography[heading=bibintoc]
%%%%% to be replaced by,  for final version:
%\intput{mythesis.bbl}
%%%%%%%%%%%%%%%%%%%%%%%%%  4th COVER %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\backcover\ % requires thcover.sty loaded and thcoverdata.tex filled
\end{document}